ğŸš€ Starting MANAGER E2E Test...
ğŸ“§ Account: test-manager@test-org-1.com
ğŸ¢ Department: Engineering

============================================================
TEST 1: LOGIN & DASHBOARD
============================================================
âœ… Login form filled
â³ Submitting login...
âœ… Login successful - redirected to dashboard
âœ… Dashboard screenshot saved

ğŸ“Š Checking MANAGER dashboard widgets...
   Found 0 widgets/cards

ğŸ” Expected MANAGER widgets:
   âœ“ Department Overview (Engineering only)
   âœ“ Active Candidates (department-only)
   âœ“ Pending Approvals (offers)
   âœ“ Hiring Pipeline
   âœ“ Team Performance

âŒ Should NOT see:
   âœ— Org-wide analytics (ADMIN only)
   âœ— System health
   âœ— Usage limits

ğŸ” Console Errors: 0
âœ… ZERO console errors

âœ… TEST 1 COMPLETE

============================================================
TEST 2: DEPARTMENT DATA ISOLATION (CRITICAL)
============================================================
âœ… Navigated to Candidates page
ğŸ“Š Candidates visible: 0
âœ… No department filter (good - should only see Engineering)

ğŸ” CRITICAL CHECK:
   All candidates MUST be from Engineering department
   NO Sales, Marketing, HR candidates should be visible

âœ… TEST 2 COMPLETE

============================================================
TEST 3: CANDIDATE REVIEW
============================================================
âš ï¸ No candidates found to test detail view

âœ… TEST 3 COMPLETE

============================================================
TEST 4: OFFER APPROVAL WORKFLOW
============================================================
âœ… Navigated to Offers page
   Approve button visible: False
   Reject button visible: False

ğŸ” CRITICAL CHECK:
   All offers MUST be for Engineering department only
   Cannot approve/reject other departments' offers

âœ… TEST 4 COMPLETE

============================================================
TEST 5: DEPARTMENT ANALYTICS
============================================================
âœ… Navigated to Analytics page

ğŸ” CRITICAL CHECK:
   Analytics MUST show only Engineering department data
   NO org-wide analytics visible

âœ… TEST 5 COMPLETE

============================================================
TEST 6: JOB POSTINGS (LIMITED ACCESS)
============================================================
âœ… Navigated to Job Postings page
âœ… 'Create Job Posting' button correctly hidden

ğŸ” Expected behavior:
   âœ… Can VIEW job postings
   âœ… Can COMMENT on job postings
   âŒ Cannot CREATE job postings
   âŒ Cannot DELETE job postings

âœ… TEST 6 COMPLETE

============================================================
TEST 7: TEAM VIEW (DEPARTMENT ONLY)
============================================================
âœ… Navigated to Team page
ğŸ“Š Team members visible: 5

ğŸ” CRITICAL CHECK:
   Team list MUST show only Engineering department members
   Cannot see other departments' members
   Cannot change roles (ADMIN only)

âœ… TEST 7 COMPLETE

============================================================
TEST 8: RBAC VIOLATION ATTEMPTS
============================================================

ğŸ”’ Testing restricted URLs...
   âœ… Admin panel: Redirected to /dashboard
   âœ… Org settings: Redirected to /dashboard
   âœ… Billing: Redirected to /dashboard
   âœ… User management: Redirected to /dashboard
   âœ… Super admin: Redirected to /dashboard

âœ… TEST 8 COMPLETE

============================================================
FINAL CONSOLE ERROR CHECK
============================================================

ğŸ“Š Total Console Errors: 1

âŒ CONSOLE ERRORS DETECTED:

First 20 errors:
1. Failed to fetch RSC payload for http://localhost:8103/candidates. Falling back to browser navigation. TypeError: Failed to fetch
    at fetchServerResponse (webpack-internal:///(app-pages-browser)/./node_modules/next/dist/client/components/router-reducer/fetch-server-response.js:58:27)
    at InnerLayoutRouter (webpack-internal:///(app-pages-browser)/./node_modules/next/dist/client/components/layout-router.js:305:90)
    at renderWithHooks (webpack-internal:///(app-pages-browser)/./node_modules/next/dist/compiled/react-dom/cjs/react-dom.development.js:11121:18)
    at mountIndeterminateComponent (webpack-internal:///(app-pages-browser)/./node_modules/next/dist/compiled/react-dom/cjs/react-dom.development.js:16869:13)
    at beginWork$1 (webpack-internal:///(app-pages-browser)/./node_modules/next/dist/compiled/react-dom/cjs/react-dom.development.js:18458:16)
    at beginWork (webpack-internal:///(app-pages-browser)/./node_modules/next/dist/compiled/react-dom/cjs/react-dom.development.js:26927:14)
    at performUnitOfWork (webpack-internal:///(app-pages-browser)/./node_modules/next/dist/compiled/react-dom/cjs/react-dom.development.js:25748:12)
    at workLoopSync (webpack-internal:///(app-pages-browser)/./node_modules/next/dist/compiled/react-dom/cjs/react-dom.development.js:25464:5)
    at renderRootSync (webpack-internal:///(app-pages-browser)/./node_modules/next/dist/compiled/react-dom/cjs/react-dom.development.js:25419:7)
    at performConcurrentWorkOnRoot (webpack-internal:///(app-pages-browser)/./node_modules/next/dist/compiled/react-dom/cjs/react-dom.development.js:24504:74)
    at workLoop (webpack-internal:///(app-pages-browser)/./node_modules/next/dist/compiled/scheduler/cjs/scheduler.development.js:256:34)
    at flushWork (webpack-internal:///(app-pages-browser)/./node_modules/next/dist/compiled/scheduler/cjs/scheduler.development.js:225:14)
    at MessagePort.performWorkUntilDeadline (webpack-internal:///(app-pages-browser)/./node_modules/next/dist/compiled/scheduler/cjs/scheduler.development.js:534:21)

ğŸš¨ ZERO CONSOLE ERROR POLICY VIOLATED!
   errorCount MUST be 0

============================================================
E2E TEST SUMMARY - MANAGER ROLE
============================================================

âœ… Tests Completed: 8
ğŸ“§ Account: test-manager@test-org-1.com
ğŸ¢ Department: Engineering
ğŸ“¸ Screenshots: /home/asan/Desktop/ikai/screenshots/w3-manager/
ğŸ” Console Errors: 1

ğŸ”´ CRITICAL VERIFICATION NEEDED:
   1. Department isolation (Engineering only)
   2. Cross-department access blocked
   3. Offer approval scope (Engineering only)
   4. RBAC violations properly blocked
   5. Zero console errors

âœ… Test script completed!

âœ… Closing browser...
âœ… Browser closed successfully
