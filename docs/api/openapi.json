{
  "openapi": "3.0.0",
  "info": {
    "title": "IKAI HR Platform API",
    "version": "1.0.0",
    "description": "Complete API documentation for IKAI HR recruitment platform with multi-tenant architecture and role-based access control. 141 endpoints across 29 categories.",
    "contact": {
      "name": "IKAI Support",
      "email": "info@gaiai.ai",
      "url": "https://gaiai.ai/ik"
    },
    "license": {
      "name": "Proprietary",
      "url": "https://gaiai.ai/ik/terms"
    }
  },
  "servers": [
    {
      "url": "http://localhost:8102",
      "description": "Development server (Docker)"
    },
    {
      "url": "https://gaiai.ai/ik",
      "description": "Production server (VPS)"
    }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "JWT token obtained from /api/v1/auth/login endpoint"
      }
    },
    "schemas": {
      "User": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Unique user identifier"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "User email (unique)"
          },
          "role": {
            "type": "string",
            "enum": [
              "USER",
              "ADMIN",
              "MANAGER",
              "HR_SPECIALIST",
              "SUPER_ADMIN"
            ],
            "description": "User role for RBAC"
          },
          "organizationId": {
            "type": "string",
            "format": "uuid",
            "description": "Organization the user belongs to"
          },
          "firstName": {
            "type": "string",
            "nullable": true
          },
          "lastName": {
            "type": "string",
            "nullable": true
          },
          "name": {
            "type": "string",
            "nullable": true
          },
          "avatar": {
            "type": "string",
            "nullable": true,
            "description": "Avatar URL"
          },
          "position": {
            "type": "string",
            "nullable": true
          },
          "isActive": {
            "type": "boolean",
            "default": true
          },
          "isOnboarded": {
            "type": "boolean",
            "default": false
          },
          "emailNotifications": {
            "type": "boolean",
            "default": true
          },
          "analysisNotifications": {
            "type": "boolean",
            "default": true
          },
          "teamNotifications": {
            "type": "boolean",
            "default": true
          },
          "offerNotifications": {
            "type": "boolean",
            "default": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        },
        "required": [
          "id",
          "email",
          "role",
          "organizationId"
        ]
      },
      "Organization": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string"
          },
          "slug": {
            "type": "string",
            "description": "Unique slug for organization"
          },
          "domain": {
            "type": "string",
            "nullable": true
          },
          "logo": {
            "type": "string",
            "nullable": true
          },
          "primaryColor": {
            "type": "string",
            "default": "#4F46E5"
          },
          "industry": {
            "type": "string",
            "nullable": true
          },
          "size": {
            "type": "string",
            "nullable": true
          },
          "country": {
            "type": "string",
            "default": "TR"
          },
          "timezone": {
            "type": "string",
            "default": "Europe/Istanbul"
          },
          "plan": {
            "type": "string",
            "enum": [
              "FREE",
              "PRO",
              "ENTERPRISE"
            ],
            "default": "FREE"
          },
          "planStartedAt": {
            "type": "string",
            "format": "date-time"
          },
          "planExpiresAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "monthlyAnalysisCount": {
            "type": "integer",
            "default": 0
          },
          "monthlyCvCount": {
            "type": "integer",
            "default": 0
          },
          "totalUsers": {
            "type": "integer",
            "default": 1
          },
          "maxAnalysisPerMonth": {
            "type": "integer",
            "default": 10
          },
          "maxCvPerMonth": {
            "type": "integer",
            "default": 50
          },
          "maxUsers": {
            "type": "integer",
            "default": 2
          },
          "onboardingCompleted": {
            "type": "boolean",
            "default": false
          },
          "onboardingStep": {
            "type": "integer",
            "default": 0
          },
          "isActive": {
            "type": "boolean",
            "default": true
          },
          "isTrial": {
            "type": "boolean",
            "default": true
          },
          "trialEndsAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "JobPosting": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "title": {
            "type": "string",
            "minLength": 3,
            "maxLength": 200
          },
          "department": {
            "type": "string",
            "minLength": 2,
            "maxLength": 100
          },
          "details": {
            "type": "string",
            "description": "Job description and requirements"
          },
          "notes": {
            "type": "string",
            "nullable": true,
            "description": "Internal notes"
          },
          "userId": {
            "type": "string",
            "format": "uuid",
            "description": "User who created the posting"
          },
          "organizationId": {
            "type": "string",
            "format": "uuid"
          },
          "isDeleted": {
            "type": "boolean",
            "default": false
          },
          "deletedAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        },
        "required": [
          "title",
          "department",
          "details"
        ]
      },
      "Candidate": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string"
          },
          "email": {
            "type": "string",
            "format": "email",
            "nullable": true
          },
          "phone": {
            "type": "string",
            "nullable": true
          },
          "cvUrl": {
            "type": "string",
            "nullable": true,
            "description": "MinIO URL for CV file"
          },
          "organizationId": {
            "type": "string",
            "format": "uuid"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Analysis": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "candidateId": {
            "type": "string",
            "format": "uuid"
          },
          "jobPostingId": {
            "type": "string",
            "format": "uuid"
          },
          "status": {
            "type": "string",
            "enum": [
              "PENDING",
              "PROCESSING",
              "COMPLETED",
              "FAILED"
            ],
            "default": "PENDING"
          },
          "score": {
            "type": "number",
            "minimum": 0,
            "maximum": 100,
            "nullable": true
          },
          "aiResponse": {
            "type": "object",
            "nullable": true,
            "description": "Gemini AI analysis result"
          },
          "organizationId": {
            "type": "string",
            "format": "uuid"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "completedAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          }
        }
      },
      "JobOffer": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "candidateId": {
            "type": "string",
            "format": "uuid"
          },
          "jobPostingId": {
            "type": "string",
            "format": "uuid"
          },
          "analysisId": {
            "type": "string",
            "format": "uuid",
            "nullable": true
          },
          "position": {
            "type": "string"
          },
          "department": {
            "type": "string"
          },
          "salary": {
            "type": "number"
          },
          "currency": {
            "type": "string",
            "default": "TRY"
          },
          "startDate": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "status": {
            "type": "string",
            "enum": [
              "DRAFT",
              "PENDING",
              "SENT",
              "ACCEPTED",
              "REJECTED",
              "NEGOTIATING",
              "EXPIRED"
            ],
            "default": "DRAFT"
          },
          "organizationId": {
            "type": "string",
            "format": "uuid"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Interview": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "candidateId": {
            "type": "string",
            "format": "uuid"
          },
          "jobPostingId": {
            "type": "string",
            "format": "uuid"
          },
          "scheduledAt": {
            "type": "string",
            "format": "date-time"
          },
          "duration": {
            "type": "integer",
            "description": "Duration in minutes"
          },
          "location": {
            "type": "string",
            "nullable": true
          },
          "meetingLink": {
            "type": "string",
            "nullable": true
          },
          "status": {
            "type": "string",
            "enum": [
              "SCHEDULED",
              "COMPLETED",
              "CANCELLED",
              "NO_SHOW"
            ]
          },
          "notes": {
            "type": "string",
            "nullable": true
          },
          "organizationId": {
            "type": "string",
            "format": "uuid"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Error": {
        "type": "object",
        "properties": {
          "error": {
            "type": "string",
            "description": "Error type or code"
          },
          "message": {
            "type": "string",
            "description": "Human-readable error message"
          },
          "statusCode": {
            "type": "integer",
            "description": "HTTP status code"
          },
          "details": {
            "type": "array",
            "items": {
              "type": "object"
            },
            "description": "Validation errors (if applicable)"
          }
        },
        "required": [
          "error",
          "message"
        ]
      },
      "LoginRequest": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "example": "test-admin@test-org-1.com"
          },
          "password": {
            "type": "string",
            "format": "password",
            "example": "TestPass123!"
          }
        },
        "required": [
          "email",
          "password"
        ]
      },
      "LoginResponse": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "example": "Login successful"
          },
          "user": {
            "$ref": "#/components/schemas/User"
          },
          "token": {
            "type": "string",
            "description": "JWT token",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
          }
        }
      },
      "RegisterRequest": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "format": "email"
          },
          "password": {
            "type": "string",
            "minLength": 8
          }
        },
        "required": [
          "email",
          "password"
        ]
      }
    }
  },
  "paths": {
    "/api/v1/auth/register": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Register new user",
        "description": "Create new user account with automatic organization creation. Returns JWT token. Public endpoint with rate limiting (100 requests per 15 minutes).",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterRequest"
              },
              "example": {
                "email": "newuser@example.com",
                "password": "SecurePass123!"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Registration successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "User registered successfully"
                    },
                    "user": {
                      "$ref": "#/components/schemas/User"
                    },
                    "token": {
                      "type": "string",
                      "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "error": "Validation Error",
                  "message": "Invalid input data",
                  "details": [
                    {
                      "field": "password",
                      "message": "Password must be at least 8 characters long"
                    }
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Email already exists",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "error": "Conflict",
                  "message": "Email already exists"
                }
              }
            }
          },
          "429": {
            "description": "Too many requests (rate limit exceeded)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "error": "Too Many Requests",
                  "message": "\u00c7ok fazla giri\u015f denemesi yap\u0131ld\u0131. L\u00fctfen 15 dakika sonra tekrar deneyin."
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/login": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Login to platform",
        "description": "Authenticate user with email and password. Returns JWT token. Public endpoint with rate limiting (100 requests per 15 minutes).",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              },
              "example": {
                "email": "test-admin@test-org-1.com",
                "password": "TestPass123!"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login successful",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponse"
                },
                "example": {
                  "message": "Login successful",
                  "user": {
                    "id": "96d1d73f-7e33-4c5d-bd10-da74e860add2",
                    "email": "test-admin@test-org-1.com",
                    "role": "ADMIN",
                    "organizationId": "org-uuid-here",
                    "name": "Test ADMIN 1",
                    "isActive": true,
                    "createdAt": "2025-11-04T10:00:00.000Z"
                  },
                  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI5NmQxZDczZi03ZTMzLTRjNWQtYmQxMC1kYTc0ZTg2MGFkZDIiLCJyb2xlIjoiQURNSU4iLCJpYXQiOjE3NjIyMDM0NzIsImV4cCI6MTc2MjgwODI3Mn0.dFOYkFjnSZtxMvgpRluGNCZYr-zpEh5wHA29IQVuvvM"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Invalid credentials",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "error": "Unauthorized",
                  "message": "Invalid email or password"
                }
              }
            }
          },
          "429": {
            "description": "Too many requests (rate limit exceeded)"
          }
        }
      }
    },
    "/api/v1/auth/logout": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Logout current user",
        "description": "Invalidate user session (remove from Redis). Requires authentication.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Logout successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Logout successful"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized (missing or invalid token)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/me": {
      "get": {
        "tags": [
          "Authentication"
        ],
        "summary": "Get current user info",
        "description": "Returns authenticated user's profile. Requires authentication.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "User info retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User"
                },
                "example": {
                  "id": "96d1d73f-7e33-4c5d-bd10-da74e860add2",
                  "email": "test-admin@test-org-1.com",
                  "role": "ADMIN",
                  "organizationId": "org-uuid-here",
                  "name": "Test ADMIN 1",
                  "firstName": "Test",
                  "lastName": "ADMIN 1",
                  "isActive": true,
                  "isOnboarded": true,
                  "emailNotifications": true,
                  "createdAt": "2025-11-04T10:00:00.000Z",
                  "updatedAt": "2025-11-04T10:00:00.000Z"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized (missing or invalid token)"
          }
        }
      }
    },
    "/api/v1/auth/refresh": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Refresh JWT token",
        "description": "Generate new JWT token using current valid token. Extends session. Requires authentication.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Token refreshed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "token": {
                      "type": "string",
                      "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                    },
                    "message": {
                      "type": "string",
                      "example": "Token refreshed successfully"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized (missing or invalid token)"
          }
        }
      }
    },
    "/api/v1/job-postings": {
      "get": {
        "tags": [
          "Job Postings"
        ],
        "summary": "Get all job postings",
        "description": "Returns job postings for current organization. SUPER_ADMIN sees all organizations. Requires HR_MANAGERS role (ADMIN, MANAGER, HR_SPECIALIST).",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roles": [
            "SUPER_ADMIN",
            "ADMIN",
            "MANAGER",
            "HR_SPECIALIST"
          ],
          "roleGroup": "HR_MANAGERS"
        },
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of job postings",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/JobPosting"
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden (USER role cannot access)"
          }
        }
      },
      "post": {
        "tags": [
          "Job Postings"
        ],
        "summary": "Create new job posting",
        "description": "Create job posting for organization. Requires HR_MANAGERS role.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roles": [
            "SUPER_ADMIN",
            "ADMIN",
            "MANAGER",
            "HR_SPECIALIST"
          ],
          "roleGroup": "HR_MANAGERS"
        },
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "title",
                  "department",
                  "details"
                ],
                "properties": {
                  "title": {
                    "type": "string",
                    "minLength": 3,
                    "maxLength": 200
                  },
                  "department": {
                    "type": "string",
                    "minLength": 2,
                    "maxLength": 100
                  },
                  "details": {
                    "type": "string",
                    "minLength": 10
                  },
                  "notes": {
                    "type": "string",
                    "nullable": true
                  }
                }
              },
              "example": {
                "title": "Senior Backend Developer",
                "department": "Engineering",
                "details": "We are looking for an experienced backend developer with Node.js and PostgreSQL expertise...",
                "notes": "Urgent hire"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Job posting created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/JobPosting"
                }
              }
            }
          },
          "400": {
            "description": "Validation error"
          },
          "403": {
            "description": "Forbidden (USER role)"
          }
        }
      }
    },
    "/api/v1/job-postings/{id}": {
      "get": {
        "tags": [
          "Job Postings"
        ],
        "summary": "Get job posting by ID",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Job posting details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/JobPosting"
                }
              }
            }
          },
          "404": {
            "description": "Job posting not found"
          },
          "403": {
            "description": "Cannot access other organization's job posting"
          }
        }
      },
      "put": {
        "tags": [
          "Job Postings"
        ],
        "summary": "Update job posting",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "title": {
                    "type": "string"
                  },
                  "department": {
                    "type": "string"
                  },
                  "details": {
                    "type": "string"
                  },
                  "notes": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Job posting updated"
          },
          "403": {
            "description": "Forbidden"
          },
          "404": {
            "description": "Not found"
          }
        }
      },
      "delete": {
        "tags": [
          "Job Postings"
        ],
        "summary": "Delete job posting",
        "description": "Soft delete (sets isDeleted flag). Requires HR_MANAGERS role.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Job posting deleted"
          },
          "403": {
            "description": "Forbidden"
          },
          "404": {
            "description": "Not found"
          }
        }
      }
    },
    "/api/v1/candidates": {
      "get": {
        "tags": [
          "Candidates"
        ],
        "summary": "Get all candidates",
        "description": "Returns candidates for current organization. Requires HR_MANAGERS role.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 20
            }
          },
          {
            "in": "query",
            "name": "search",
            "schema": {
              "type": "string"
            },
            "description": "Search by name or email"
          },
          {
            "in": "query",
            "name": "jobPostingId",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Filter by job posting"
          }
        ],
        "responses": {
          "200": {
            "description": "List of candidates",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Candidate"
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden (USER role)"
          }
        }
      }
    },
    "/api/v1/candidates/check-duplicate": {
      "post": {
        "tags": [
          "Candidates"
        ],
        "summary": "Check duplicate CV file",
        "description": "Check if CV file already exists before upload. Prevents duplicate uploads.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "fileName": {
                    "type": "string"
                  },
                  "fileSize": {
                    "type": "integer"
                  },
                  "fileHash": {
                    "type": "string",
                    "description": "MD5 hash of file"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Duplicate check result",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "isDuplicate": {
                      "type": "boolean"
                    },
                    "existingCandidate": {
                      "$ref": "#/components/schemas/Candidate",
                      "nullable": true
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/candidates/upload": {
      "post": {
        "tags": [
          "Candidates"
        ],
        "summary": "Upload CV and create candidate",
        "description": "Upload CV file (PDF, DOCX, TXT) and create candidate record. Tracks usage limits (maxCvPerMonth).",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "required": [
                  "cv"
                ],
                "properties": {
                  "cv": {
                    "type": "string",
                    "format": "binary",
                    "description": "CV file (PDF, DOCX, TXT, max 10MB)"
                  },
                  "name": {
                    "type": "string",
                    "description": "Candidate name (optional, extracted from CV if not provided)"
                  },
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "phone": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "CV uploaded, candidate created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Candidate"
                }
              }
            }
          },
          "400": {
            "description": "Invalid file format or size"
          },
          "403": {
            "description": "Usage limit exceeded (FREE plan: 50 CVs/month)"
          },
          "413": {
            "description": "File too large (max 10MB)"
          }
        }
      }
    },
    "/api/v1/candidates/{id}": {
      "get": {
        "tags": [
          "Candidates"
        ],
        "summary": "Get candidate by ID",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Candidate details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Candidate"
                }
              }
            }
          },
          "404": {
            "description": "Candidate not found"
          },
          "403": {
            "description": "Cannot access other organization's candidate"
          }
        }
      },
      "delete": {
        "tags": [
          "Candidates"
        ],
        "summary": "Delete candidate",
        "description": "Delete candidate and associated CV file from MinIO.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Candidate deleted"
          },
          "403": {
            "description": "Forbidden"
          },
          "404": {
            "description": "Not found"
          }
        }
      }
    },
    "/api/v1/candidates/export/xlsx": {
      "get": {
        "tags": [
          "Candidates"
        ],
        "summary": "Export candidates to Excel",
        "description": "Download all candidates as XLSX file",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "responses": {
          "200": {
            "description": "XLSX file download",
            "content": {
              "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              }
            },
            "headers": {
              "Content-Disposition": {
                "schema": {
                  "type": "string"
                },
                "description": "attachment; filename=candidates.xlsx"
              }
            }
          }
        }
      }
    },
    "/api/v1/candidates/export/csv": {
      "get": {
        "tags": [
          "Candidates"
        ],
        "summary": "Export candidates to CSV",
        "description": "Download all candidates as CSV file",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "responses": {
          "200": {
            "description": "CSV file download",
            "content": {
              "text/csv": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "headers": {
              "Content-Disposition": {
                "schema": {
                  "type": "string"
                },
                "description": "attachment; filename=candidates.csv"
              }
            }
          }
        }
      }
    },
    "/api/v1/analyses": {
      "post": {
        "tags": [
          "Analyses"
        ],
        "summary": "Create new CV analysis",
        "description": "Create AI-powered CV analysis for multiple candidates against a job posting. Uses Gemini AI. Tracks usage limits (maxAnalysisPerMonth). Jobs are queued in BullMQ.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "jobPostingId",
                  "candidateIds"
                ],
                "properties": {
                  "jobPostingId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Job posting to analyze against"
                  },
                  "candidateIds": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "minItems": 1,
                    "description": "Candidate IDs to analyze (min 1)"
                  }
                }
              },
              "example": {
                "jobPostingId": "550e8400-e29b-41d4-a716-446655440000",
                "candidateIds": [
                  "candidate-uuid-1",
                  "candidate-uuid-2"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Analysis created (queued for processing)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Analysis"
                }
              }
            }
          },
          "400": {
            "description": "Validation error (invalid IDs)"
          },
          "403": {
            "description": "Usage limit exceeded (FREE plan: 10 analyses/month)"
          }
        }
      },
      "get": {
        "tags": [
          "Analyses"
        ],
        "summary": "Get all analyses",
        "description": "Returns all analyses for current organization with status and results",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 20
            }
          },
          {
            "in": "query",
            "name": "status",
            "schema": {
              "type": "string",
              "enum": [
                "PENDING",
                "PROCESSING",
                "COMPLETED",
                "FAILED"
              ]
            },
            "description": "Filter by status"
          },
          {
            "in": "query",
            "name": "jobPostingId",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Filter by job posting"
          }
        ],
        "responses": {
          "200": {
            "description": "List of analyses",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Analysis"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analyses/{id}": {
      "get": {
        "tags": [
          "Analyses"
        ],
        "summary": "Get analysis by ID with results",
        "description": "Returns detailed analysis results including AI scores and recommendations",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Analysis details with AI results",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Analysis"
                },
                "example": {
                  "id": "analysis-uuid",
                  "status": "COMPLETED",
                  "score": 85,
                  "aiResponse": {
                    "matchScore": 85,
                    "strengths": [
                      "5+ years Node.js",
                      "PostgreSQL expert"
                    ],
                    "weaknesses": [
                      "No Docker experience"
                    ],
                    "recommendation": "HIRE"
                  },
                  "completedAt": "2025-11-04T12:00:00.000Z"
                }
              }
            }
          },
          "404": {
            "description": "Analysis not found"
          },
          "403": {
            "description": "Cannot access other organization's analysis"
          }
        }
      },
      "delete": {
        "tags": [
          "Analyses"
        ],
        "summary": "Delete analysis",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Analysis deleted"
          },
          "404": {
            "description": "Not found"
          }
        }
      }
    },
    "/api/v1/analyses/{id}/add-candidates": {
      "post": {
        "tags": [
          "Analyses"
        ],
        "summary": "Add more candidates to existing analysis",
        "description": "Extend existing analysis with additional candidates",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "candidateIds"
                ],
                "properties": {
                  "candidateIds": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "minItems": 1
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Candidates added to analysis"
          },
          "400": {
            "description": "Validation error"
          },
          "404": {
            "description": "Analysis not found"
          }
        }
      }
    },
    "/api/v1/analyses/{id}/export/xlsx": {
      "get": {
        "tags": [
          "Analyses"
        ],
        "summary": "Export analysis results to Excel",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "XLSX file with analysis results",
            "content": {
              "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analyses/{id}/export/csv": {
      "get": {
        "tags": [
          "Analyses"
        ],
        "summary": "Export analysis results to CSV",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "CSV file with analysis results",
            "content": {
              "text/csv": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analyses/{id}/export/html": {
      "get": {
        "tags": [
          "Analyses"
        ],
        "summary": "Export analysis results to HTML",
        "description": "Download formatted HTML report with analysis results",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "HTML report",
            "content": {
              "text/html": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analyses/{id}/send-email": {
      "post": {
        "tags": [
          "Analyses"
        ],
        "summary": "Email analysis results",
        "description": "Send analysis results via email in specified formats",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "recipientEmail",
                  "formats"
                ],
                "properties": {
                  "recipientEmail": {
                    "type": "string",
                    "format": "email"
                  },
                  "formats": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "enum": [
                        "xlsx",
                        "csv",
                        "html"
                      ]
                    },
                    "minItems": 1
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Email sent successfully"
          },
          "400": {
            "description": "Invalid email or formats"
          }
        }
      }
    },
    "/api/v1/analyses/{id}/send-feedback": {
      "post": {
        "tags": [
          "Analyses"
        ],
        "summary": "Send feedback to candidates",
        "description": "Send automated feedback emails to candidates based on analysis results. Can filter by score threshold.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "scoreThreshold": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 100,
                    "description": "Send to candidates with score >= threshold"
                  },
                  "candidateIds": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "description": "Send to specific candidates only"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Feedback emails sent"
          },
          "400": {
            "description": "Invalid parameters"
          }
        }
      }
    },
    "/api/v1/offers": {
      "get": {
        "tags": [
          "Offers"
        ],
        "summary": "Get all offers",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "responses": {
          "200": {
            "description": "List of offers"
          }
        }
      },
      "post": {
        "tags": [
          "Offers"
        ],
        "summary": "Create offer",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/JobOffer"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Offer created"
          }
        }
      }
    },
    "/api/v1/offers/wizard": {
      "post": {
        "tags": [
          "Offers"
        ],
        "summary": "Create offer from wizard",
        "description": "Multi-step wizard for offer creation",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "responses": {
          "201": {
            "description": "Offer created from wizard"
          }
        }
      }
    },
    "/api/v1/offers/bulk-send": {
      "post": {
        "tags": [
          "Offers"
        ],
        "summary": "Send multiple offers",
        "description": "Bulk send offers to candidates",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "responses": {
          "200": {
            "description": "Offers sent"
          }
        }
      }
    },
    "/api/v1/offers/{id}": {
      "get": {
        "tags": [
          "Offers"
        ],
        "summary": "Get offer by ID",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Offer details"
          }
        }
      },
      "put": {
        "tags": [
          "Offers"
        ],
        "summary": "Update offer",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Offer updated"
          }
        }
      },
      "delete": {
        "tags": [
          "Offers"
        ],
        "summary": "Delete offer",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Offer deleted"
          }
        }
      }
    },
    "/api/v1/offers/{id}/send": {
      "patch": {
        "tags": [
          "Offers"
        ],
        "summary": "Send offer to candidate",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Offer sent"
          }
        }
      }
    },
    "/api/v1/offers/{id}/preview-pdf": {
      "get": {
        "tags": [
          "Offers"
        ],
        "summary": "Preview offer PDF",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "PDF preview",
            "content": {
              "application/pdf": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/offers/{id}/download-pdf": {
      "get": {
        "tags": [
          "Offers"
        ],
        "summary": "Download offer PDF",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "PDF download",
            "content": {
              "application/pdf": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/offers/{id}/request-approval": {
      "patch": {
        "tags": [
          "Offers"
        ],
        "summary": "Request approval for offer",
        "description": "Submit offer for approval workflow",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Approval requested"
          }
        }
      }
    },
    "/api/v1/offers/{id}/approve": {
      "patch": {
        "tags": [
          "Offers"
        ],
        "summary": "Approve offer",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Offer approved"
          }
        }
      }
    },
    "/api/v1/offers/{id}/reject-approval": {
      "patch": {
        "tags": [
          "Offers"
        ],
        "summary": "Reject offer approval",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Approval rejected"
          }
        }
      }
    },
    "/api/v1/offers/{id}/expire": {
      "patch": {
        "tags": [
          "Offers"
        ],
        "summary": "Expire offer manually",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Offer expired"
          }
        }
      }
    },
    "/api/v1/offers/{id}/extend": {
      "patch": {
        "tags": [
          "Offers"
        ],
        "summary": "Extend offer expiration",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Expiration extended"
          }
        }
      }
    },
    "/api/v1/interviews": {
      "get": {
        "tags": [
          "Interviews"
        ],
        "summary": "Get all interviews",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "responses": {
          "200": {
            "description": "List of interviews"
          }
        }
      },
      "post": {
        "tags": [
          "Interviews"
        ],
        "summary": "Create interview",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "responses": {
          "201": {
            "description": "Interview created"
          }
        }
      }
    },
    "/api/v1/interviews/stats": {
      "get": {
        "tags": [
          "Interviews"
        ],
        "summary": "Get interview statistics",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "responses": {
          "200": {
            "description": "Interview stats"
          }
        }
      }
    },
    "/api/v1/interviews/{id}": {
      "get": {
        "tags": [
          "Interviews"
        ],
        "summary": "Get interview by ID",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Interview details"
          }
        }
      },
      "delete": {
        "tags": [
          "Interviews"
        ],
        "summary": "Delete interview",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Interview deleted"
          }
        }
      }
    },
    "/api/v1/interviews/{id}/status": {
      "patch": {
        "tags": [
          "Interviews"
        ],
        "summary": "Update interview status",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roleGroup": "HR_MANAGERS"
        },
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Status updated"
          }
        }
      }
    },
    "/api/v1/team": {
      "get": {
        "tags": [
          "Team"
        ],
        "summary": "Get all team members",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roles": [
            "ADMIN",
            "SUPER_ADMIN"
          ]
        },
        "responses": {
          "200": {
            "description": "List of team members"
          }
        }
      }
    },
    "/api/v1/team/invite": {
      "post": {
        "tags": [
          "Team"
        ],
        "summary": "Invite team member",
        "description": "Send invitation email",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roles": [
            "ADMIN",
            "SUPER_ADMIN"
          ]
        },
        "responses": {
          "201": {
            "description": "Invitation sent"
          }
        }
      }
    },
    "/api/v1/team/{id}": {
      "get": {
        "tags": [
          "Team"
        ],
        "summary": "Get team member",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roles": [
            "ADMIN",
            "SUPER_ADMIN"
          ]
        },
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Team member"
          }
        }
      },
      "patch": {
        "tags": [
          "Team"
        ],
        "summary": "Update team member",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roles": [
            "ADMIN",
            "SUPER_ADMIN"
          ]
        },
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Updated"
          }
        }
      },
      "delete": {
        "tags": [
          "Team"
        ],
        "summary": "Delete team member",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roles": [
            "ADMIN",
            "SUPER_ADMIN"
          ]
        },
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Deleted"
          }
        }
      }
    },
    "/api/v1/organization/me": {
      "get": {
        "tags": [
          "Organizations"
        ],
        "summary": "Get current organization",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Organization details"
          }
        }
      },
      "patch": {
        "tags": [
          "Organizations"
        ],
        "summary": "Update organization",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roles": [
            "ADMIN",
            "SUPER_ADMIN"
          ]
        },
        "responses": {
          "200": {
            "description": "Updated"
          }
        }
      }
    },
    "/api/v1/organization/usage": {
      "get": {
        "tags": [
          "Organizations"
        ],
        "summary": "Get usage statistics",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Usage stats"
          }
        }
      }
    },
    "/api/v1/users/me": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "Get current user profile",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "User profile"
          }
        }
      },
      "patch": {
        "tags": [
          "Users"
        ],
        "summary": "Update profile",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Updated"
          }
        }
      }
    },
    "/api/v1/users": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "Get all users",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roles": [
            "ADMIN",
            "SUPER_ADMIN"
          ]
        },
        "responses": {
          "200": {
            "description": "Users list"
          }
        }
      }
    },
    "/api/v1/users/{id}": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "Get user by ID",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roles": [
            "ADMIN",
            "SUPER_ADMIN"
          ]
        },
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User"
          }
        }
      },
      "patch": {
        "tags": [
          "Users"
        ],
        "summary": "Update user",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-rbac": {
          "roles": [
            "ADMIN",
            "SUPER_ADMIN"
          ]
        },
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Updated"
          }
        }
      }
    },
    "/api/v1/dashboard": {
      "get": {
        "tags": [
          "Dashboard"
        ],
        "summary": "Get dashboard statistics",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Dashboard stats"
          }
        }
      }
    }
  },
  "tags": [
    {
      "name": "Authentication",
      "description": "User authentication and session management"
    },
    {
      "name": "Job Postings",
      "description": "Job posting CRUD operations (HR_MANAGERS role required)"
    },
    {
      "name": "Candidates",
      "description": "Candidate management and CV uploads"
    },
    {
      "name": "Analyses",
      "description": "CV analysis with Gemini AI"
    },
    {
      "name": "Offers",
      "description": "Job offer management and negotiations"
    },
    {
      "name": "Interviews",
      "description": "Interview scheduling and management"
    },
    {
      "name": "Team",
      "description": "Team member invitations and management"
    },
    {
      "name": "Organizations",
      "description": "Organization settings and usage stats"
    },
    {
      "name": "Users",
      "description": "User profile and preferences"
    },
    {
      "name": "Dashboard",
      "description": "Dashboard analytics and statistics"
    },
    {
      "name": "Super Admin",
      "description": "System-wide management (SUPER_ADMIN only)"
    }
  ],
  "x-rbac-matrix": {
    "description": "Role-Based Access Control Matrix",
    "roles": {
      "SUPER_ADMIN": {
        "description": "System administrator with cross-organization access",
        "permissions": "All 141 endpoints, can see data from all organizations"
      },
      "ADMIN": {
        "description": "Organization administrator",
        "permissions": "Full access within organization (~120 endpoints), cannot see other orgs"
      },
      "MANAGER": {
        "description": "Department manager",
        "permissions": "Can create/edit job postings, offers, interviews (~90 endpoints). Cannot delete most resources."
      },
      "HR_SPECIALIST": {
        "description": "HR staff member",
        "permissions": "Can manage candidates, schedule interviews (~80 endpoints). Cannot create job postings or delete."
      },
      "USER": {
        "description": "Basic employee",
        "permissions": "Dashboard and profile only (~20 endpoints). No HR operations."
      }
    },
    "middleware": {
      "authenticateToken": "Validates JWT token from Authorization header",
      "enforceOrganizationIsolation": "Ensures users can only access their organization's data (SUPER_ADMIN exempt)",
      "authorize": "Checks user role against allowed roles for endpoint"
    },
    "roleGroups": {
      "HR_MANAGERS": [
        "SUPER_ADMIN",
        "ADMIN",
        "MANAGER",
        "HR_SPECIALIST"
      ],
      "ADMINS": [
        "SUPER_ADMIN",
        "ADMIN"
      ],
      "ALL_AUTHENTICATED": [
        "SUPER_ADMIN",
        "ADMIN",
        "MANAGER",
        "HR_SPECIALIST",
        "USER"
      ]
    }
  }
}