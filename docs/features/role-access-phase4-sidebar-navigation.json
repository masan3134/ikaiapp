{
  "phase": "Phase 4 - Sidebar Navigation Role-Based Visibility",
  "duration": "1 hour",
  "priority": "HIGH",
  "dependencies": ["Phase 1 - Infrastructure complete", "Phase 2 - Backend routes protected", "Phase 3 - Frontend pages protected"],
  "description": "Update AppLayout sidebar to show/hide menu items based on user role using useHasRole hook",

  "ASANMOD_STRICT_MODE": {
    "FORBIDDEN": [
      "‚ùå NO simulation or mocking - use REAL tools only",
      "‚ùå NO placeholder outputs - paste REAL terminal data",
      "‚ùå NO 'completed successfully' without proof",
      "‚ùå NO assumptions - verify everything with grep/Read",
      "‚ùå NO fake browser test results - human must test",
      "‚ùå NO skipping verification commands"
    ],
    "REQUIRED": [
      "‚úÖ ALWAYS use Bash tool for verification commands",
      "‚úÖ ALWAYS use Read tool before Edit tool",
      "‚úÖ ALWAYS paste exact terminal outputs to reports",
      "‚úÖ ALWAYS run real npm run build (not simulated)",
      "‚úÖ ALWAYS verify file exists before claiming done",
      "‚úÖ ALWAYS let reviewer decide if task completed"
    ],
    "VERIFICATION_PRINCIPLE": "Ham veri konu≈üur - AI cannot lie with real grep/wc outputs!"
  },

  "mcpRequirements": {
    "required": ["filesystem"],
    "optional": ["sequentialthinking"],
    "usage": {
      "filesystem": "Read AppLayout.tsx, edit to add role-based menu filtering, write verification reports",
      "sequentialthinking": "Plan menu item visibility logic"
    },
    "verification": "Run 'ls ~/.config/Code/User/settings.json' to check MCP config exists"
  },

  "toolUsageGuide": {
    "forTask_4.1": {
      "step1": "Use Read tool to read frontend/components/AppLayout.tsx",
      "step2": "Use Edit tool to import useHasRole hook",
      "step3": "Use Edit tool to add role checks to menu items",
      "step4": "Use Read tool to verify changes"
    },
    "forTask_4.2": {
      "step1": "Run bash commands from verificationCommands object",
      "step2": "Use Write tool to create docs/reports/phase4-sidebar-verification.md",
      "step3": "Copy RAW terminal outputs into MD file"
    },
    "forTask_4.3": {
      "instructions": "This is MANUAL browser testing - AI cannot automate",
      "humanRequired": true,
      "step1": "Human opens browser and tests with different roles",
      "step2": "Human verifies menu items appear/disappear correctly",
      "step3": "AI uses Write tool to save human's observations"
    }
  },

  "currentState": {
    "file": "frontend/components/AppLayout.tsx",
    "menuItems": [
      "Dashboard - visible to all authenticated users",
      "Analiz Sihirbazƒ± - visible to all",
      "ƒ∞≈ü ƒ∞lanlarƒ± - visible to all",
      "Adaylar - visible to all",
      "Ge√ßmi≈ü Analizlerim - visible to all",
      "Teklifler submenu - visible to all",
      "  - Yeni Teklif",
      "  - T√ºm Teklifler",
      "  - ≈ûablonlar",
      "  - Analytics"
    ],
    "missingItems": [
      "Team menu (ADMIN+)",
      "Settings menu (ADMIN+)",
      "Super Admin menu (SUPER_ADMIN only)"
    ],
    "issue": "All menu items visible to all roles, no role-based filtering"
  },

  "targetState": {
    "menuItems": [
      {
        "item": "Dashboard",
        "visibleTo": "ALL_AUTHENTICATED",
        "note": "Everyone sees dashboard"
      },
      {
        "item": "Analiz Sihirbazƒ±",
        "visibleTo": "HR_MANAGERS",
        "note": "HR_SPECIALIST+"
      },
      {
        "item": "ƒ∞≈ü ƒ∞lanlarƒ±",
        "visibleTo": "HR_MANAGERS",
        "note": "HR_SPECIALIST+"
      },
      {
        "item": "Adaylar",
        "visibleTo": "HR_MANAGERS",
        "note": "HR_SPECIALIST+"
      },
      {
        "item": "Ge√ßmi≈ü Analizlerim",
        "visibleTo": "HR_MANAGERS",
        "note": "HR_SPECIALIST+"
      },
      {
        "item": "Teklifler (parent)",
        "visibleTo": "HR_MANAGERS",
        "note": "HR_SPECIALIST+"
      },
      {
        "item": "  - Yeni Teklif",
        "visibleTo": "HR_MANAGERS",
        "note": "HR_SPECIALIST+"
      },
      {
        "item": "  - T√ºm Teklifler",
        "visibleTo": "HR_MANAGERS",
        "note": "HR_SPECIALIST+"
      },
      {
        "item": "  - ≈ûablonlar",
        "visibleTo": "ANALYTICS_VIEWERS",
        "note": "MANAGER+"
      },
      {
        "item": "  - Analytics",
        "visibleTo": "ANALYTICS_VIEWERS",
        "note": "MANAGER+"
      },
      {
        "item": "Team (NEW)",
        "visibleTo": "ADMINS",
        "note": "ADMIN+ only"
      },
      {
        "item": "Settings (NEW)",
        "visibleTo": "ADMINS",
        "note": "ADMIN+ only"
      },
      {
        "item": "Super Admin (NEW)",
        "visibleTo": "SUPER_ADMIN",
        "note": "SUPER_ADMIN only"
      }
    ]
  },

  "tasks": [
    {
      "id": "4.1",
      "title": "Add Role-Based Filtering to AppLayout",
      "file": "frontend/components/AppLayout.tsx",
      "priority": "CRITICAL",
      "estimatedTime": "30 minutes",
      "description": "Import useHasRole hook and add conditional rendering to menu items based on user role",
      "dependencies": [],
      "instructions": [
        "1. Read current AppLayout.tsx file",
        "2. Import useHasRole and RoleGroups at top",
        "3. Add role checks using useHasRole hook for each menu item",
        "4. Add Team, Settings, Super Admin menu items (ADMIN+)",
        "5. Wrap menu items with role checks - use && operator",
        "6. Verify imports and syntax with Read tool"
      ],
      "codeChanges": {
        "imports": "import { useHasRole } from '@/lib/hooks/useHasRole';\nimport { RoleGroups, UserRole } from '@/lib/constants/roles';",
        "hooks": "// Inside component, after existing hooks\nconst canManageHR = useHasRole(RoleGroups.HR_MANAGERS);\nconst canViewAnalytics = useHasRole(RoleGroups.ANALYTICS_VIEWERS);\nconst isAdmin = useHasRole(RoleGroups.ADMINS);\nconst isSuperAdmin = useHasRole([UserRole.SUPER_ADMIN]);",
        "menuItemsUpdate": "// Change allMenuItems to only include items visible to ALL\nconst allMenuItems = [\n  { name: 'Dashboard', path: '/dashboard', icon: LayoutDashboard },\n  // Conditional items added below with &&\n];",
        "conditionalRendering": "// In JSX, wrap menu items:\n{allMenuItems.map((item) => ...)}\n\n{/* HR Manager items */}\n{canManageHR && (\n  <>\n    <Link href=\"/wizard\">...</Link>\n    <Link href=\"/job-postings\">...</Link>\n    <Link href=\"/candidates\">...</Link>\n    <Link href=\"/analyses\">...</Link>\n  </>\n)}\n\n{/* Offers submenu */}\n{canManageHR && (\n  <div>\n    {/* Offers parent button */}\n    ...\n    {/* Submenu */}\n    {isOffersExpanded && (\n      <div>\n        {/* Yeni Teklif, T√ºm Teklifler - HR_MANAGERS */}\n        <Link href=\"/offers/wizard\">...</Link>\n        <Link href=\"/offers\">...</Link>\n        \n        {/* ≈ûablonlar, Analytics - ANALYTICS_VIEWERS (MANAGER+) */}\n        {canViewAnalytics && (\n          <>\n            <Link href=\"/offer-templates\">...</Link>\n            <Link href=\"/offers/analytics\">...</Link>\n          </>\n        )}\n      </div>\n    )}\n  </div>\n)}\n\n{/* Admin-only items */}\n{isAdmin && (\n  <>\n    <Link href=\"/team\">\n      <Users size={20} />\n      <span>Team</span>\n    </Link>\n    <Link href=\"/settings/organization\">\n      <Settings size={20} />\n      <span>Settings</span>\n    </Link>\n  </>\n)}\n\n{/* Super Admin only */}\n{isSuperAdmin && (\n  <Link href=\"/super-admin\">\n    <Shield size={20} />\n    <span>Super Admin</span>\n  </Link>\n)}",
        "newImports": "import { Settings } from 'lucide-react'; // Add Settings icon if not imported"
      },
      "verificationSteps": [
        "1. Read updated AppLayout.tsx",
        "2. Verify useHasRole imported",
        "3. Verify RoleGroups imported",
        "4. Verify hook calls: canManageHR, canViewAnalytics, isAdmin, isSuperAdmin",
        "5. Verify conditional rendering with && operators",
        "6. Count menu items wrapped in role checks"
      ]
    },
    {
      "id": "4.2",
      "title": "Generate Code Verification Report",
      "priority": "CRITICAL",
      "estimatedTime": "15 minutes",
      "description": "Create MD report with RAW grep outputs to verify role-based filtering implementation",
      "dependencies": ["4.1"],
      "outputFile": "docs/reports/phase4-sidebar-verification.md",
      "instructions": [
        "‚ö†Ô∏è ASANMOD STRICT MODE - REAL VERIFICATION ONLY ‚ö†Ô∏è",
        "1. Run all verification commands below - USE BASH TOOL (no simulation!)",
        "2. Copy EXACT terminal output - character-by-character paste",
        "3. DO NOT interpret results - raw data only",
        "4. DO NOT add checkmarks or success messages - forbidden!",
        "5. DO NOT mock/simulate/placeholder - REAL commands ONLY",
        "6. If command fails, paste the REAL error message",
        "7. Use Write tool to create MD file with REAL outputs",
        "8. Let reviewer read raw data and decide if successful",
        "‚ùå FORBIDDEN: simulation, mocking, placeholders, 'completed successfully'",
        "‚úÖ REQUIRED: Real Bash executions, real Read operations, real terminal outputs"
      ],
      "VERIFICATION_PROOF_REQUIRED": {
        "method": "Mod cross-check",
        "description": "Mod MUST re-run same commands to verify Worker's outputs are real",
        "workflow": "1. Worker runs commands ‚Üí pastes outputs to MD | 2. Worker reports 'done' | 3. Mod reads MD | 4. Mod RE-RUNS same commands | 5. Mod compares: Worker's output == Mod's output? | 6. If match ‚Üí VERIFIED | If mismatch ‚Üí Worker LIED",
        "enforcement": "Mod never trusts MD alone - ALWAYS re-execute verification commands"
      },
      "reportTemplate": "# Phase 4 - Sidebar Navigation Verification\n\n**‚ö†Ô∏è MOD VERIFICATION REQUIRED:**\nAfter Worker creates this report, Mod MUST re-run ALL commands below and compare outputs.\nIf Worker's output != Mod's output ‚Üí Worker used fake data!\n\n---\n\nDate: [CURRENT_DATE]\nExecutor: [WORKER_NAME]\n\n## 1. useHasRole Hook Import Check\n\n```bash\n$ grep -n \"useHasRole\" frontend/components/AppLayout.tsx\n```\n\n**Worker Output:**\n```\n[PASTE_EXACT_OUTPUT_HERE]\n```\n\n**Expected:** Import line + hook calls (canManageHR, canViewAnalytics, isAdmin, isSuperAdmin)\n\n**Mod Re-Run (for verification):**\n```\n[MOD_FILLS_THIS_AFTER_RE-RUNNING_COMMAND]\n```\n\n**Match?** [MOD: YES/NO]\n\n---\n\n## 2. RoleGroups Import Check\n\n```bash\n$ grep -n \"RoleGroups\" frontend/components/AppLayout.tsx\n```\n\n**Output:**\n```\n[PASTE_EXACT_OUTPUT_HERE]\n```\n\n**Expected:** Import statement with RoleGroups\n\n---\n\n## 3. Conditional Rendering Check (canManageHR)\n\n```bash\n$ grep -n \"canManageHR &&\" frontend/components/AppLayout.tsx\n```\n\n**Output:**\n```\n[PASTE_EXACT_OUTPUT_HERE]\n```\n\n**Expected:** Multiple lines with canManageHR && conditions\n\n---\n\n## 4. Admin-Only Menu Items\n\n```bash\n$ grep -n \"isAdmin &&\" frontend/components/AppLayout.tsx\n```\n\n**Output:**\n```\n[PASTE_EXACT_OUTPUT_HERE]\n```\n\n**Expected:** Conditional rendering for Team and Settings\n\n---\n\n## 5. Super Admin Menu Item\n\n```bash\n$ grep -n \"isSuperAdmin &&\" frontend/components/AppLayout.tsx\n```\n\n**Output:**\n```\n[PASTE_EXACT_OUTPUT_HERE]\n```\n\n**Expected:** Conditional rendering for Super Admin menu\n\n---\n\n## 6. Team Menu Item\n\n```bash\n$ grep -n \"/team\" frontend/components/AppLayout.tsx\n```\n\n**Output:**\n```\n[PASTE_EXACT_OUTPUT_HERE]\n```\n\n**Expected:** Link to /team page\n\n---\n\n## 7. Settings Menu Item\n\n```bash\n$ grep -n \"/settings\" frontend/components/AppLayout.tsx\n```\n\n**Output:**\n```\n[PASTE_EXACT_OUTPUT_HERE]\n```\n\n**Expected:** Link to /settings/organization page\n\n---\n\n## 8. TypeScript Compilation Check\n\n```bash\n$ cd frontend && npm run build 2>&1 | head -50\n```\n\n**Output:**\n```\n[PASTE_EXACT_OUTPUT_HERE]\n```\n\n**Expected:** Successful build or specific errors listed\n\n---\n\n## Summary\n\n**useHasRole imported:** [YES/NO from section 1]\n**RoleGroups imported:** [YES/NO from section 2]\n**canManageHR checks:** [COUNT from section 3]\n**isAdmin checks:** [COUNT from section 4]\n**isSuperAdmin checks:** [COUNT from section 5]\n**Team menu added:** [YES/NO from section 6]\n**Settings menu added:** [YES/NO from section 7]\n**TypeScript errors:** [YES/NO from section 8]\n\n**Status:** [COMPLETE/INCOMPLETE] - Review raw data above to verify\n\n---\n\n**Note to Reviewer:** This report contains RAW terminal output. Review each section to verify:\n- Section 1: Should show import + 4 hook calls\n- Section 2: Should show RoleGroups import\n- Section 3: Should show multiple canManageHR && lines\n- Section 4: Should show isAdmin && lines (Team, Settings)\n- Section 5: Should show isSuperAdmin && line (Super Admin menu)\n- Section 6: Should show /team path in Link\n- Section 7: Should show /settings path in Link\n- Section 8: Should show successful build\n",
      "verificationCommands": {
        "step1_useHasRole": "grep -n \"useHasRole\" frontend/components/AppLayout.tsx",
        "step2_roleGroups": "grep -n \"RoleGroups\" frontend/components/AppLayout.tsx",
        "step3_canManageHR": "grep -n \"canManageHR &&\" frontend/components/AppLayout.tsx",
        "step4_isAdmin": "grep -n \"isAdmin &&\" frontend/components/AppLayout.tsx",
        "step5_isSuperAdmin": "grep -n \"isSuperAdmin &&\" frontend/components/AppLayout.tsx",
        "step6_team": "grep -n \"/team\" frontend/components/AppLayout.tsx",
        "step7_settings": "grep -n \"/settings\" frontend/components/AppLayout.tsx",
        "step8_build": "cd frontend && npm run build 2>&1 | head -50"
      }
    },
    {
      "id": "4.3",
      "title": "Manual Browser Testing Report",
      "priority": "CRITICAL",
      "estimatedTime": "20 minutes",
      "description": "Test sidebar menu visibility with different roles in real browser",
      "dependencies": ["4.2"],
      "outputFile": "docs/reports/phase4-sidebar-testing-results.md",
      "instructions": [
        "‚ö†Ô∏è ASANMOD STRICT MODE - HUMAN TESTING REQUIRED ‚ö†Ô∏è",
        "‚ùå AI CANNOT simulate browser testing - HUMAN MUST DO THIS",
        "‚ùå DO NOT create fake test results - FORBIDDEN",
        "‚ùå DO NOT assume menu items appear/hide - MUST VERIFY IN REAL BROWSER",
        "‚úÖ HUMAN opens http://localhost:8103 in REAL browser",
        "‚úÖ HUMAN logs in with different role accounts",
        "‚úÖ HUMAN checks which menu items are visible in sidebar",
        "1. HUMAN opens browser at localhost:8103",
        "2. HUMAN logs in as USER role",
        "3. HUMAN counts visible menu items and lists them",
        "4. HUMAN logs out and logs in as HR_SPECIALIST",
        "5. HUMAN counts visible menu items and lists them",
        "6. HUMAN repeats for MANAGER, ADMIN, SUPER_ADMIN roles",
        "7. AI uses Write tool to save HUMAN's observations to MD file",
        "‚ö†Ô∏è This task REQUIRES human interaction - AI creates report template only"
      ],
      "reportTemplate": "# Phase 4 - Sidebar Menu Visibility Testing\n\nDate: [CURRENT_DATE]\nTester: [YOUR_NAME]\nBrowser: [Chrome/Firefox/etc]\n\n---\n\n## Test 1: USER Role\n\n**Test User:**\n- Email: [USER_EMAIL]\n- Role: USER\n\n**Visible Menu Items:**\n```\n[List EXACT menu items visible in sidebar:\n1. Dashboard\n2. ...\n]\n```\n\n**Expected Menu Items:**\n- Dashboard\n\n**Hidden Menu Items (confirmed not visible):**\n```\n[List items that should be hidden:\n- Analiz Sihirbazƒ±\n- ƒ∞≈ü ƒ∞lanlarƒ±\n- ...\n]\n```\n\n**Result:** [PASS/FAIL]\n\n---\n\n## Test 2: HR_SPECIALIST Role\n\n**Test User:**\n- Email: [HR_SPECIALIST_EMAIL]\n- Role: HR_SPECIALIST\n\n**Visible Menu Items:**\n```\n[List EXACT menu items visible:\n1. Dashboard\n2. Analiz Sihirbazƒ±\n3. ƒ∞≈ü ƒ∞lanlarƒ±\n...\n]\n```\n\n**Expected Menu Items:**\n- Dashboard\n- Analiz Sihirbazƒ±\n- ƒ∞≈ü ƒ∞lanlarƒ±\n- Adaylar\n- Ge√ßmi≈ü Analizlerim\n- Teklifler (parent)\n  - Yeni Teklif\n  - T√ºm Teklifler\n\n**Hidden Menu Items (should NOT see):**\n```\n[List:\n- ≈ûablonlar (under Teklifler)\n- Analytics (under Teklifler)\n- Team\n- Settings\n- Super Admin\n]\n```\n\n**Result:** [PASS/FAIL]\n\n---\n\n## Test 3: MANAGER Role\n\n**Test User:**\n- Email: [MANAGER_EMAIL]\n- Role: MANAGER\n\n**Visible Menu Items:**\n```\n[List EXACT menu items visible including ≈ûablonlar and Analytics]\n```\n\n**Expected Menu Items:**\n- Dashboard\n- Analiz Sihirbazƒ±\n- ƒ∞≈ü ƒ∞lanlarƒ±\n- Adaylar\n- Ge√ßmi≈ü Analizlerim\n- Teklifler (parent)\n  - Yeni Teklif\n  - T√ºm Teklifler\n  - ≈ûablonlar\n  - Analytics\n\n**Hidden Menu Items (should NOT see):**\n```\n- Team\n- Settings\n- Super Admin\n```\n\n**Result:** [PASS/FAIL]\n\n---\n\n## Test 4: ADMIN Role\n\n**Test User:**\n- Email: [ADMIN_EMAIL]\n- Role: ADMIN\n\n**Visible Menu Items:**\n```\n[List EXACT menu items including Team and Settings]\n```\n\n**Expected Menu Items:**\n- Dashboard\n- Analiz Sihirbazƒ±\n- ƒ∞≈ü ƒ∞lanlarƒ±\n- Adaylar\n- Ge√ßmi≈ü Analizlerim\n- Teklifler (all subitems)\n- Team (NEW)\n- Settings (NEW)\n\n**Hidden Menu Items (should NOT see):**\n```\n- Super Admin\n```\n\n**Result:** [PASS/FAIL]\n\n---\n\n## Test 5: SUPER_ADMIN Role\n\n**Test User:**\n- Email: [SUPER_ADMIN_EMAIL]\n- Role: SUPER_ADMIN\n\n**Visible Menu Items:**\n```\n[List EXACT menu items - should see ALL]\n```\n\n**Expected Menu Items:**\n- Dashboard\n- Analiz Sihirbazƒ±\n- ƒ∞≈ü ƒ∞lanlarƒ±\n- Adaylar\n- Ge√ßmi≈ü Analizlerim\n- Teklifler (all subitems)\n- Team\n- Settings\n- Super Admin (NEW)\n\n**Hidden Menu Items:**\n```\nNONE - Super admin sees everything\n```\n\n**Result:** [PASS/FAIL]\n\n---\n\n## Summary Table\n\n| Role | Dashboard | Wizard | Jobs | Candidates | Analyses | Offers | Templates | Analytics | Team | Settings | SuperAdmin | Result |\n|------|-----------|--------|------|------------|----------|--------|-----------|-----------|------|----------|------------|--------|\n| USER | ‚úì | ‚úó | ‚úó | ‚úó | ‚úó | ‚úó | ‚úó | ‚úó | ‚úó | ‚úó | ‚úó | [PASS/FAIL] |\n| HR_SPECIALIST | ‚úì | ‚úì | ‚úì | ‚úì | ‚úì | ‚úì | ‚úó | ‚úó | ‚úó | ‚úó | ‚úó | [PASS/FAIL] |\n| MANAGER | ‚úì | ‚úì | ‚úì | ‚úì | ‚úì | ‚úì | ‚úì | ‚úì | ‚úó | ‚úó | ‚úó | [PASS/FAIL] |\n| ADMIN | ‚úì | ‚úì | ‚úì | ‚úì | ‚úì | ‚úì | ‚úì | ‚úì | ‚úì | ‚úì | ‚úó | [PASS/FAIL] |\n| SUPER_ADMIN | ‚úì | ‚úì | ‚úì | ‚úì | ‚úì | ‚úì | ‚úì | ‚úì | ‚úì | ‚úì | ‚úì | [PASS/FAIL] |\n\n**Legend:**\n- ‚úì = Menu item visible\n- ‚úó = Menu item hidden\n- [Fill in PASS if matches expected, FAIL if doesn't match]\n\n---\n\n## Issues Found\n\n[List any problems discovered during testing]\n\n1. [Issue description]\n2. [Issue description]\n\nOr write: **No issues found - all menu items show/hide correctly based on role**\n\n---\n\n**Note to Reviewer:** This report contains RAW manual testing observations. Review to confirm sidebar menu visibility is working as designed.\n",
      "testScenarios": [
        {
          "role": "USER",
          "shouldSee": ["Dashboard"],
          "shouldNotSee": ["Analiz Sihirbazƒ±", "ƒ∞≈ü ƒ∞lanlarƒ±", "Adaylar", "Teklifler", "Team", "Settings", "Super Admin"]
        },
        {
          "role": "HR_SPECIALIST",
          "shouldSee": ["Dashboard", "Analiz Sihirbazƒ±", "ƒ∞≈ü ƒ∞lanlarƒ±", "Adaylar", "Ge√ßmi≈ü Analizlerim", "Teklifler (Yeni, T√ºm)"],
          "shouldNotSee": ["≈ûablonlar", "Analytics", "Team", "Settings", "Super Admin"]
        },
        {
          "role": "MANAGER",
          "shouldSee": ["Dashboard", "Analiz Sihirbazƒ±", "ƒ∞≈ü ƒ∞lanlarƒ±", "Adaylar", "Ge√ßmi≈ü Analizlerim", "Teklifler (all)", "≈ûablonlar", "Analytics"],
          "shouldNotSee": ["Team", "Settings", "Super Admin"]
        },
        {
          "role": "ADMIN",
          "shouldSee": ["Dashboard", "Analiz Sihirbazƒ±", "ƒ∞≈ü ƒ∞lanlarƒ±", "Adaylar", "Ge√ßmi≈ü Analizlerim", "Teklifler (all)", "Team", "Settings"],
          "shouldNotSee": ["Super Admin"]
        },
        {
          "role": "SUPER_ADMIN",
          "shouldSee": ["ALL menu items including Super Admin"],
          "shouldNotSee": []
        }
      ]
    },
    {
      "id": "4.4",
      "title": "Console & Log Verification",
      "priority": "CRITICAL",
      "estimatedTime": "10 minutes",
      "description": "Verify frontend/backend logs are clean and services are healthy",
      "dependencies": ["4.3"],
      "outputFile": "docs/reports/phase4-sidebar-verification.md",
      "instructions": [
        "‚ö†Ô∏è ASANMOD STRICT MODE - LOG VERIFICATION REQUIRED ‚ö†Ô∏è",
        "1. Check frontend logs - docker logs ikai-frontend --tail 50 | grep -i 'error\\|warning\\|failed'",
        "2. Check backend logs - docker logs ikai-backend --tail 100 | grep -i 'error\\|exception\\|failed'",
        "3. Check services health - docker ps --filter 'name=ikai'",
        "4. Test backend health endpoint - curl -s http://localhost:8102/health | jq",
        "5. Paste ALL outputs to verification MD (append to existing report)",
        "6. If ANY errors found - FIX FIRST before reporting done",
        "‚ùå FORBIDDEN: Reporting 'done' with console errors",
        "‚ùå FORBIDDEN: Ignoring 500 errors, exceptions, failed builds",
        "‚ùå FORBIDDEN: Simulating clean logs",
        "‚úÖ REQUIRED: Clean logs (only warnings about NODE_ENV are OK)",
        "‚úÖ REQUIRED: All services running and healthy",
        "‚úÖ REQUIRED: Backend health returns 200 OK"
      ],
      "logVerificationTemplate": "\n\n---\n\n## 9. Console & Log Verification\n\n### Frontend Logs Check\n\n```bash\n$ docker logs ikai-frontend --tail 50 | grep -i \"error\\|warning\\|failed\"\n```\n\n**Worker Output:**\n```\n[PASTE_EXACT_OUTPUT_HERE]\n(if no output, write: \"(no errors found - clean logs)\")\n```\n\n**Mod Re-Run (for verification):**\n```\n[MOD_FILLS_THIS_AFTER_RE-RUNNING_COMMAND]\n```\n\n**Match?** [MOD: YES/NO]\n\n---\n\n### Backend Logs Check\n\n```bash\n$ docker logs ikai-backend --tail 100 | grep -i \"error\\|exception\\|failed\"\n```\n\n**Worker Output:**\n```\n[PASTE_EXACT_OUTPUT_HERE]\n(if no output, write: \"(no errors found - clean logs)\")\n```\n\n**Mod Re-Run (for verification):**\n```\n[MOD_FILLS_THIS_AFTER_RE-RUNNING_COMMAND]\n```\n\n**Match?** [MOD: YES/NO]\n\n---\n\n### Services Health Check\n\n```bash\n$ docker ps --filter \"name=ikai\" --format \"{{.Names}}: {{.Status}}\"\n```\n\n**Worker Output:**\n```\n[PASTE_EXACT_OUTPUT_HERE]\n```\n\n**Expected:**\n- ikai-frontend: Up (running)\n- ikai-backend: Up (healthy)\n- ikai-postgres: Up (healthy)\n- ikai-redis: Up (healthy)\n- ikai-minio: Up (healthy)\n- ikai-milvus: Up (healthy)\n\n**Mod Re-Run (for verification):**\n```\n[MOD_FILLS_THIS_AFTER_RE-RUNNING_COMMAND]\n```\n\n**Match?** [MOD: YES/NO]\n\n---\n\n### Backend Health Endpoint\n\n```bash\n$ curl -s http://localhost:8102/health | jq\n```\n\n**Worker Output:**\n```\n[PASTE_EXACT_OUTPUT_HERE]\n```\n\n**Expected:**\n```json\n{\n  \"status\": \"ok\",\n  \"services\": {\n    \"database\": \"connected\",\n    \"redis\": \"connected\",\n    \"minio\": \"connected\"\n  }\n}\n```\n\n**Mod Re-Run (for verification):**\n```\n[MOD_FILLS_THIS_AFTER_RE-RUNNING_COMMAND]\n```\n\n**Match?** [MOD: YES/NO]\n\n---\n\n### Browser Console Check (User Verification)\n\n**User must check:**\n1. Open http://localhost:8103 in browser\n2. Open DevTools Console (F12)\n3. Navigate to /job-postings, /team, /settings\n4. Report console state\n\n**User Report:**\n- Console errors: [COUNT]\n- Console warnings: [COUNT]\n- Pages loaded successfully: [YES/NO]\n\n**Acceptable warnings:**\n- \"non-standard NODE_ENV\" (OK)\n- \"npm notice\" (OK)\n\n**NOT acceptable (must fix):**\n- GET /api/* 500 errors\n- TypeError, ReferenceError\n- Failed to compile\n- Unhandled promise rejection\n\n---\n\n### Log Verification Summary\n\n**Frontend Logs:** [CLEAN / ERRORS_FOUND]\n**Backend Logs:** [CLEAN / ERRORS_FOUND]\n**Services Health:** [ALL_RUNNING / SOME_DOWN]\n**Backend API:** [HEALTHY / UNHEALTHY]\n**Browser Console:** [CLEAN / ERRORS_FOUND]\n\n**Overall Status:** [‚úÖ ALL_CLEAN / ‚ùå ERRORS_MUST_FIX]\n\n**If errors found, list them:**\n1. [Error description]\n2. [Error description]\n\n**Or write:** No errors found - Phase 4 logs are clean ‚úÖ\n\n---\n\n**Note to Mod:** Re-run all log verification commands to confirm Worker used real tools. If Worker said \"clean\" but Mod finds errors ‚Üí Worker LIED.\n",
      "verificationCommands": {
        "frontend_logs": "docker logs ikai-frontend --tail 50 | grep -i 'error\\|warning\\|failed'",
        "backend_logs": "docker logs ikai-backend --tail 100 | grep -i 'error\\|exception\\|failed'",
        "services_health": "docker ps --filter 'name=ikai' --format '{{.Names}}: {{.Status}}'",
        "backend_health": "curl -s http://localhost:8102/health | jq"
      },
      "acceptableWarnings": [
        "‚ö† You are using a non-standard \"NODE_ENV\" value",
        "‚ö† npm notice New major version available",
        "[info]: ‚úÖ Backend running",
        "[info]: Redis connected"
      ],
      "notAcceptableErrors": [
        "Error: Cannot find module",
        "TypeError: undefined is not a function",
        "GET /api/* 500 (Internal Server Error)",
        "UnhandledPromiseRejectionWarning",
        "PrismaClientKnownRequestError",
        "‚úó Failed to compile",
        "‚úó Build failed because of webpack errors",
        "ERROR: relation does not exist",
        "ERROR: column does not exist"
      ]
    }
  ],

  "verification": {
    "codeChecks": [
      "‚úÖ useHasRole hook imported and used",
      "‚úÖ RoleGroups imported from constants",
      "‚úÖ canManageHR, canViewAnalytics, isAdmin, isSuperAdmin hooks called",
      "‚úÖ Menu items wrapped with role check conditions (&&)",
      "‚úÖ Team menu added (ADMIN+)",
      "‚úÖ Settings menu added (ADMIN+)",
      "‚úÖ Super Admin menu added (SUPER_ADMIN only)",
      "‚úÖ TypeScript compilation successful"
    ],
    "browserChecks": [
      "‚úÖ USER sees only Dashboard",
      "‚úÖ HR_SPECIALIST sees HR operations (no analytics/templates)",
      "‚úÖ MANAGER sees analytics and templates",
      "‚úÖ ADMIN sees Team and Settings",
      "‚úÖ SUPER_ADMIN sees all menu items including Super Admin",
      "‚úÖ Menu items dynamically appear/disappear based on logged-in user role"
    ]
  },

  "menuVisibilityMatrix": {
    "Dashboard": "ALL_AUTHENTICATED",
    "Analiz Sihirbazƒ±": "HR_MANAGERS (HR_SPECIALIST+)",
    "ƒ∞≈ü ƒ∞lanlarƒ±": "HR_MANAGERS (HR_SPECIALIST+)",
    "Adaylar": "HR_MANAGERS (HR_SPECIALIST+)",
    "Ge√ßmi≈ü Analizlerim": "HR_MANAGERS (HR_SPECIALIST+)",
    "Teklifler_Parent": "HR_MANAGERS (HR_SPECIALIST+)",
    "  Yeni Teklif": "HR_MANAGERS (HR_SPECIALIST+)",
    "  T√ºm Teklifler": "HR_MANAGERS (HR_SPECIALIST+)",
    "  ≈ûablonlar": "ANALYTICS_VIEWERS (MANAGER+)",
    "  Analytics": "ANALYTICS_VIEWERS (MANAGER+)",
    "Team": "ADMINS (ADMIN+)",
    "Settings": "ADMINS (ADMIN+)",
    "Super Admin": "SUPER_ADMIN only"
  },

  "completionMessage": "üéâ Phase 4 Sidebar Navigation Complete!\n\n‚úÖ Menu items show/hide based on role\n‚úÖ useHasRole hook integrated\n‚úÖ 3 new menu items added (Team, Settings, Super Admin)\n‚úÖ Role-based visibility working correctly\n\nNext: Phase 5 - Final testing & documentation",

  "nextPhase": "Phase 5 will perform comprehensive end-to-end testing and create final documentation"
}
